"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[345],{5235:function(e,n,t){t.d(n,{Z:function(){return u}});t(2791);var r="Pagination_pagination__vcNDC",a="Pagination_active__DDld0",s=t(184),u=function(e){var n=e.currentPage,t=e.totalPages,u=e.onPageChange,i=function(){var e=Math.max(1,n-Math.floor(2.5)),r=e+5-1;r>t&&(r=t,e=Math.max(1,r-5+1));for(var a=[],s=e;s<=r;s++)a.push(s);return a}();return(0,s.jsxs)("div",{className:r,children:[(0,s.jsx)("button",{disabled:1===n,onClick:function(){return u(1)},children:"\u23ee First"}),(0,s.jsx)("button",{disabled:1===n,onClick:function(){return u(n-1)},children:"\u25c0 Prev"}),i[0]>1&&(0,s.jsx)("span",{children:"..."}),i.map((function(e){return(0,s.jsx)("button",{className:e===n?a:"",onClick:function(){return u(e)},children:e},e)})),i[i.length-1]<t&&(0,s.jsx)("span",{children:"..."}),(0,s.jsx)("button",{disabled:n===t,onClick:function(){return u(n+1)},children:"Next \u25b6"}),(0,s.jsx)("button",{disabled:n===t,onClick:function(){return u(t)},children:"Last \u23ed"})]})}},5345:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(3433),a=t(5861),s=t(9439),u=t(7757),i=t.n(u),c=t(2791),o=t(1087),l=t(5453),f=t(4420),d=t(5235),h=t(5080),p=t(7689),g=t(7762),v=function(){var e=(0,a.Z)(i().mark((function e(n,t){var r,a,u,c,o,f,d=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>2&&void 0!==d[2]?d[2]:500,a=d.length>3&&void 0!==d[3]?d[3]:5,u=parseInt(t),c=[],o=i().mark((function e(t){var o,f,d,h,p,v,x,m,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Array.from({length:a},(function(e,n){return t+n})).filter((function(e){return e<=r})),e.next=3,Promise.allSettled(o.map((function(e){return n((0,l.go)(e))})));case 3:f=e.sent,d=(0,g.Z)(f.entries());try{for(d.s();!(h=d.n()).done;)p=(0,s.Z)(h.value,2),v=p[0],"fulfilled"===(x=p[1]).status&&(b=(null===(m=x.value.payload)||void 0===m?void 0:m.results)||[],b.some((function(e){return Array.isArray(e.genre_ids)&&e.genre_ids.includes(u)}))&&c.push(o[v]))}catch(i){d.e(i)}finally{d.f()}if(!(t+a>r)){e.next=8;break}return e.abrupt("return","break");case 8:case"end":return e.stop()}}),e)})),f=1;case 6:if(!(f<=r)){e.next=14;break}return e.delegateYield(o(f),"t0",8);case 8:if("break"!==e.t0){e.next=11;break}return e.abrupt("break",14);case 11:f+=a,e.next=6;break;case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),x=v,m=t(4455),b=(t(7059),t(184)),k=function(){var e=(0,c.useState)([]),n=(0,s.Z)(e,2),t=n[0],u=n[1],g=(0,c.useState)([]),v=(0,s.Z)(g,2),k=v[0],j=v[1],_=(0,c.useState)(1),Z=(0,s.Z)(_,2),y=Z[0],P=Z[1],w=(0,c.useState)(1),C=(0,s.Z)(w,2),N=C[0],S=C[1],I=(0,c.useState)(!0),A=(0,s.Z)(I,2),E=A[0],M=A[1],D=(0,f.I0)(),F=(0,p.UO)(),L=F.genId,U=F.genName,z=function(e,n){var t=parseInt(n);return e.filter((function(e){return e.genre_ids&&e.genre_ids.includes(t)}))};(0,c.useEffect)((function(){var e=function(){var e=(0,a.Z)(i().mark((function e(){var n,t,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.prev=1,e.next=4,x(D,L,500);case 4:if(0!==(n=e.sent).length){e.next=9;break}return u([]),S(1),e.abrupt("return");case 9:return e.next=11,Promise.all(n.map((function(e){return D((0,l.go)(e))})));case 11:t=e.sent,a=[],t.forEach((function(e){var n;if(null!==(n=e.payload)&&void 0!==n&&n.results){var t=z(e.payload.results,L);a=[].concat((0,r.Z)(a),(0,r.Z)(t))}})),u(a),s=Math.ceil(a.length/20),S(s),P(1),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.error("Error fetching and aggregating movies:",e.t0);case 23:return e.prev=23,M(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[1,20,23,26]])})));return function(){return e.apply(this,arguments)}}();e()}),[D,L]),(0,c.useEffect)((function(){var e=20*(y-1),n=e+20,r=t.slice(e,n);j(r)}),[t,y]);return(0,b.jsxs)("section",{className:"page",children:[(0,b.jsxs)("h1",{children:["Gen: ",U]}),E?(0,b.jsx)(m.Z,{}):(0,b.jsxs)(b.Fragment,{children:[0===t.length?(0,b.jsx)("p",{children:"Nu au fost g\u0103site rezultate pentru acest gen."}):(0,b.jsx)("ul",{className:"pageList",children:k.map((function(e){return(0,b.jsxs)(o.rU,{className:"pageItem",to:"/movie/".concat(e.id),children:[(0,b.jsx)("img",{src:e.poster_path?l.yA+e.poster_path:h,alt:e.title||e.name}),(0,b.jsx)("h2",{children:e.title||e.name})]},e.id)}))}),N>1&&(0,b.jsx)(d.Z,{currentPage:y,totalPages:N,onPageChange:function(e){P(e)}})]})]})}},7059:function(){}}]);
//# sourceMappingURL=345.a1205718.chunk.js.map